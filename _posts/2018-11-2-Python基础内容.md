---
layout: post
title: 'Python基础内容'
date: 2018-11-02
author: yamada
color: blue
cover: 'https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike150%2C5%2C5%2C150%2C50/sign=db37d3b8454a20a425133495f13bf347/3b87e950352ac65c8819edd9f1f2b21193138a78.jpg'
tags: python
---
[TOC]
## 基本操作
### 数据类型
#### 数值类型
Python 3支持整型（`int`）、浮点型（`float`）、复数（`complex`）3种数值类型。
- 整型（`int`） - 通常被称为是整型或整数，是正或负整数，不带小数点。Python 3 中，整型是没有限制大小的，可以当作长整型使用；
- 浮点型（`float`） - 浮点型由整数部分与小数部分组成，浮点型也可以使用科学计数法表示（如1.5e2=1.5∗102=150）；
- 复数（`complex`） - 复数由实数部分和虚数部分构成，可以用a + bj,或者complex(a,b)表示， 复数的实部a和虚部b都是浮点型。  
此外，逻辑类型（`bool`或`boolean`）用于表示逻辑值，只能为True或False，属于整型的一种，True和False的值分别为1和0，可以和数值类型相加。
#### 字符串
另外一种常用的数据类型为字符串，Python中的字符串主要有以下特点：  
- Python中单引号和双引号使用完全相同；
- 使用三引号(’’’或“”“)可以指定一个多行字符串；
- 转义符用’'开头；
- 自然字符串， 通过在字符串前加r或R。 如 `r"this is - a line with \n" `则\n会显示，并不是换行；
- 允许处理统一的字符编码标准（unicode）字符串，加前缀u或U， 如 `u"this is an unicode string"。`
- 字符串对象一旦创建就不可变的。
#### 类型判断
对于变量，其本身只是对象的引用，没有类型之分，所谓的“类型”是变量所指的内存中对象的类型。运用Python的内置函数`type()`可对类型进行判断。
#### 类型转换
有时候需要对数据内的类型进行转换，只需要运用将数据类型作为函数名的函数就能完成数据类型的转换。例如：  
- `int(x [,base])`，将变量x转换为一个整数型，其中参数`base`为可选参数，用于设定几进制，默认值为10，即十进制；
- `float(x)`，将变量x转换成一个浮点型；
- `complex(real [,imag])`，创建一个复数，其中参数`real`为必选参数，用于设定实部，参数`imag`为可选参数，用于设定虚部；
- `str(x)`，将变量x转换为字符串
### 运算符
Python支持以下类型的运算符:  
- 算术运算符；
- 比较（关系）运算符；
- 赋值运算符；
- 逻辑运算符；
- 位运算符；
- 成员运算符；
- 身份运算符。  
下面主要介绍最常用的3种，分别为算数运算符、比较运算符和逻辑运算。
#### 算数运算符
Python中的算数运算符主要有以下几种：  
- `x + y`：加，两个对象相加；
- `x - y`：减，得到负数或是一个数减去另一个数；
- `x * y`：乘，两个数相乘或是返回一个被重复若干次的字符串；
- `x / y`：除，x除以y，两个整数相除的结果为浮点数，如3/1=3.0；
- `x % y`：取模，返回除法的余数；
- `x ** y`：幂，返回x的y次幂；
- `x // y`：取整除，返回商的整数部分，如9//4=2，9.0//2.0=2.0。
#### 比较运算符
Python中的比较运算符主要有以下几种：  
- `x == y`：等于，比较对象是否相等；
- `x != y`：不等于，比较两个对象是否不相等；
- `x > y`：大于，返回x是否大于y；
- `<`：小于，返回x是否小于y；
- `>=`：大于等于，返回x是否大于等于y；
- `<=`：小于等于，返回x是否小于等于y。
#### 逻辑运算符
Python中的逻辑运算符主要有以下几种：  
- `x and y`：布尔“与”，如果x为`False`，返回`False`，否则它返回y的计算值；
- `x or y`：布尔“或”，如果x是`True`，它返回`True`，否则它返回y的计算值；
- `not x`：布尔“非”，如果x为`True`，返回`False`；如果x为`False`，则返回`True`。
### 字符串运算和格式化输出
字符串的运算和操作方式是多样的，而当加法和乘法运算符作用于字符串时，其意义也发生了改变。  
- `+`：字符串连接；
- `*`：重复输出字符串；
- `[]`：通过索引获取字符串中字符；
- `[ : ]`：截取字符串中的一部分。  

要在代码运行中将一些中间过程的结果输出到控制台上，往往需要使用print()函数。Python中的print()函数也支持格式化输出，利用占位符对格式进行调整，常用的占位符有`%s`（字符型）、`%d`（有符号整数型）、`%f`（浮点型）等，一般所有的类型都能转换为字符串，故%s较为通用。其使用示例如下，输出时用`%()`中的内容填充占位符。
```
print("My name is %s."%('Python'))
```
输出结果为：“My name is Python.”
### 控制和循环语句
- `if`语句：当条件成立时运行语句块：经常与`else`或`elif`（相当于`else if`）配合使用；
- `for`语句：遍列列表、字符串、字典、集合等迭代器，依次处理迭代器中的每个元素；
- `while`语句：当条件为真时，循环运行语句块；
- `break`语句：可以跳出`for`和`while`的循环体；
- `continue`语句：跳过当前循环块中的剩余语句，继续进行下一轮循环。 

与其他语言不同，Python使用缩进来表示代码块，而不使用大括号（`{}`）。缩进的空格数是不固定的，但是同一个代码块的语句必须包含相同的缩进空格数。  
`if`语句常与`else`或`elif`搭配使用，其基本语法结构如下：
```
if(<条件1>):
   <语句块1>
elif(<条件2>):
   <语句块2>
else:
   <语句块3>
```
其中`elif`子句可以有零到多个，而`else`子句只能有零或一个。如果`<条件1>`为`True` 执行`<语句块1>`；否则，将判断`<条件2>`；如果`<条件2>`为`True`，执行`<语句块2>`块语句；否则，将执行`<语句块3>`块语句。

`for`循环可以遍历列表、字符串、字典等多种对象类型，语法如下：
```
for(<变量> in <取值范围>):
   <语句块>
```
`while`循环结构判断条件，如果为真则执行循环体，语法如下:
```
while(<条件>):
   <语句块>
```
## 列表操作
### 标准数据类型
Python 中有六个标准的数据类型：
- 数字（Number）
- 字符串（String）
- 列表（List）
- 元组（Tuple）
- 集合（Sets）
- 字典（Dictionary）  

元组（tuple）与列表类似，不同之处在于元组的元素不能修改；集合（set）是无序不重复元素的元素集，其基本功能是进行成员关系测试和删除重复元素；字典（dictionary）是无序的对象集合，字典当中的元素是通过键来存取的，而不是通过偏移存取。

列表是 Python 中使用最频繁的数据类型，列表中可以包含的任何类型的元素元素，包括数字，字符串等，甚至也可以是列表类似，即所谓嵌套。而同一个列表中还可以包含多种不同的类型，不过并不常用。
### 列表切片
上一个实验中对字符串进行的截取，就是切片。字符串、列表、元组在Python中都符合“序列”这一特征，只要符合这一特征的变量我们都可以用切片（slice）去存取它们的任意部分。

切片操作符在python中的原型是 [start:stop:step]，即：[开始索引:结束索引:步长值]
- 开始索引：切片操作符从该索引开始取，包含该索引的值，为空则从头开始取。如取列表a的第二个元素到列表尾，可用`a[1:]`。
- 结束索引：切片操作符将取到该索引为止，不包含该索引的值，为空则取到最后一个元素。如取列表a头到列表倒数第二个元素，可用`a[:-2]`。
- 步长值：默认值为1，即一个接着一个切取，如果为2,则表示进行隔一取一操作。步长值为正时表示从左向右取，如果为负，则表示从右向左取。步长值不能为0。如一个隔一个地取列表a头到列表倒数第二个元素，可用`a[:-2:2]`。
### 可变对象和不可变对象
在Python中，对象分为两种：可变对象和不可变对象，不可变对象包括int，float，long，str，tuple等，可变对象包括list，set，dict等。这里说的不可变指的是值的不可变。对于不可变类型的变量，如果要更改变量，则会创建一个新值，把变量绑定到新值上，而旧值如果没有被引用就等待垃圾回收。
## 函数和程序包
### 函数
函数是组织好的，可重复使用的的代码段，用来实现单一或相关联功能。函数能提高应用的模块性，和代码的重复利用率。Python提供了许多内建函数，比如之前已经涉及到的print()、type()等。用户也可以根据需求自己创建函数，这被叫做用户自定义函数。
### 方法
方法是一种特殊的函数，是类的函数称为方法。Python中包含三种方法：
- 类实例方法，实例方法是只能通过类的实例能够调用的方法，第一个形参通常被命名为self，该参数就是实例对象，这也是最常见的方法。
- 类方法，类方法是可以通过类或它的实例来调用的方法，`定义时需要在类成员函数前面加上@classmethod装饰符`，第一个形参通常被命名为cls，这一个参数是该方法的类对象。类方法任何时候定义类方法都不是必须的（类方法能实现的功能都可以通过定义一个普通函数来实现,只要这个函数接受一个类对象做为参数就可以了。）
- 静态方法，不需要定义实例就可以使用的方法。要在类中定义静态方法，`需在类成员函数前面加上@staticmethod装饰符`，以表示下面的成员函数是静态函数。另外，多个实例共享此静态方法。

它们的使用实例如下所示。
```
class A(object):  
    def foo(self,x):  
    #类实例方法  
        print "executing foo(%s,%s)"%(self,x)  
 
    @classmethod  
    def class_foo(cls,x):  
    #类方法  
        print "executing class_foo(%s,%s)"%(cls,x)  
 
    @staticmethod  
    def static_foo(x):  
    #静态方法  
        print "executing static_foo(%s)"%x  
```
### 处理数字的常用内建函数
除了之前介绍的用于输出的print()函数、生成序列的range()、用于判断类型的type()函数以及str()等类型转换函数，Python还包含许多其它的内建函数，对于数字常用的内建函数主要有以下几种：
- `abs(x)`，返回x的绝对值；
- `round(number[, ndigits])`，返回`number`的四舍五入到`ndigits`个小数点的数字。
### 列表的常用函数和方法
Python还内建了许多列表的函数和方法来强化它的功能。Python常用处理列表的函数主要有以下几种：
- `len(obj)`，返回容器中元素的个数；
- `max(...)`，返回最大值；
- `min(...)`，返回最小值；

Python列表常用的方法主要有以下几种：
- `L.count(value)`，统计元素值为value在列表中出现的次数；
- `L.index(value, [start, [stop]])`，从列表中找出元素值为`value`的第一个匹配项的索引位置，`start`、`stop`分别为开始和结束寻找的索引值，一般不使用；
- `L.append(object)`，在列表末尾添加新的对象`object`；
- `L.extend(iterable)`，在列表末尾追加`iterable`中的多个值；
- `L.pop([index])`，移除列表中索引为`index`的一个元素（默认最后一个元素），并且返回该元素的值；
- `L.remove(value)`，移除列表中元素值为`value`的第一个匹配项；
- `L.insert(index, object)`，将对象`object`插入到列表的`index`索引位置；
- `L.reverse()`，翻转列表中元素，在原列表上进行修改；
- `L.sort(key=None, reverse=False)`，对原列表进行排序，常用函数`reverse`默认为`False`即从小到大排序，如果设为`True`，则从大到小排序；
- `L.copy()`，复制列表。
### 处理字符串的常用内建函数和方法
Python也内建了许多字符串的函数和方法。Python中常用的处理字符串的函数主要有以下几种：
- `len(str)`，返回字符串的长度；
- `cmp(str1, str2)`，字符串比较，如果第一个大则返回1；
- `max(str)`，寻找字符串中最大的字符；
- `min(str)`,寻找字符串中最小的字符.

Python字符串常用的方法主要有以下几种：
- `S.find(substring, [start [,end]])`，可指范围查找子串，返回索引值，否则返回-1
- `S.rfind(substring,[start [,end]])`，反向查找
- `S.index(substring,[start [,end]])`，同find，只是找不到产生ValueError异常
- `S.rindex(substring,[start [,end]])`，反向查找
- `S.count(substring,[start [,end]])`，返回找到子串的个数
- `S.capitalize()`，首字母大写
- `S.lower()`，转小写
- `S.upper()`，转大写
- `S.swapcase()`，大小写互换
- `S.split(str, ' ')`，将string转list，以空格切分
- `S.join(list, ' ')`，将list转string，以空格连接
- `S.strip()`，去掉字符串的左右空格
- `S.lstrip()`，去掉字符串的左边空格
- `S.rstrip()`，去掉字符串的右边空格
### 定义函数
定义函数主要注意以下几点：
- 函数代码块以 def 关键词开头，之后有一空格，后接函数标识符名称和圆括号 ()；
- 圆括号()之间用于定义参数；
- 函数内容以冒号起始，并且缩进。
- 用`return [表达式]`结束函数，选择性地返回一个值给调用方，不带表达式的`return`相当于返回`None`。

基本语法结构如下：
`{r eval= FALSE} def 函数名（参数列表）:     函数体`
## Numpy数组操作
标准安装的Python中用列表保存一组值，可以用作数组，但由于列表的元素可以是任何对象，因此列表中所保存的是对象的指针。这样为了保存一个简单的[1,2,3]列表，需要有3个指针和三个整数对象。对于数值运算来说这种结构显然比较浪费内存和CPU计算时间。此外Python还提供了一个array模块，array对象和列表不同，直接保存数值，但由于它不支持多维，也没有各种运算函数，因此也不适合做数值运算。

NumPy的诞生弥补了这些不足，NumPy提供了两种基本的对象：ndarray（N-dimensional array object）和 ufunc（universal function object）。ndarray(数组)是存储单一数据类型的多维数组，而ufunc则是能够对数组进行处理的函数。
### 函数库的导入
利用`import`关键词可以导入函数库，语句`import <库名>`可以将库导入，如果库名较长，往往采用`import <库名> as <库名缩写>`语句，之后在使用时便可直接采用库名的缩写来代替库名。

有时只需要引用函数库中的一小部分，则往往采用`from <库名> import <项>`，项可以为子模块、函数或类，例如用`from numpy import array`语句可以导入`NumPy`库的`array`函数，之后在脚本中调用`array()`函数即特指调用`NumPy`库的`array`函数，与Python标准库中`array`模块的`array`函数不同，如果脚本较长，容易发生混淆，故不建议用这种方法。
### 数组的创建
NumPy包含许多用来创建数组的函数，常用的主要有以下几种：
- `array`， 将输入数据（列表、元组或其他序列类型）转换为`ndarray`，类型`dtype`可以显式指定或者自动推断；
- `asarray`，将输入转换为`ndarray`，如果输入本身就是`ndarray`则无需拷贝，若果输入是`ndarray`的子类，则返回基类的`ndarray`；
- `arange`， 类似`range`函数，返回是一个`ndarray`，元素类型也不限制为整数；
- `linspace`，类似`arange`函数，但设置的不是步长，而是返回数组的元素个数，NumPy自动计算元素值间隔；
- `ones、ones_like`，`ones`根据指定的形状和`dtype`创建一个全1数组；`ones_like`以另一个数组为参数，并根据其形状和`dtype`创建一个全1数组；
- `zeros、zeros_like`，创建一个全0数组。
- `empty、empty_like`，创建新数组，只分配内存空间不填充值。
- `eye、identity`，创建一个正方的`N`乘`N`单位矩阵（对角线为1，其余为0）。
### 数组的属性
可以通过访问它的属性来了解一个数组的维度、形状、大小等，常用的数组属性主要有以下几种：
- `ndarray.ndim`，数组的维度；
- `ndarray.shape`，以整数元组的形式表示数组各个维度上的大小，例如`n`行`m`列的矩阵，其shape为`(n,m)`；
- `ndarray.size`，数组的大小，即数组中的元素总数，其值等于shape中各个元素值得乘积；
- `ndarray.dtype`，数列中元素的类型，除了标准的Python类型，NumPy库还有其自有的`numpy.int32`，`numpy.int16`和`numpy.float64`等类型；
- `ndarray.itemsize`，数列中每个元素的大小（字节）。
- `ndarray.data`，数列中的实际元素，该属性不常使用，通常直接采用索引来获得。
### 数组的形状和转置
通过shape属性可以了解数组当前的形状，还可通过一些方法来改变数组的形状。
- `reshape`，根据传入参数创建一个改变了尺寸的视图，原数组的`shape`保持不变；
- `resize`，与`reshape`方法类似，但是该方法直接在原数组上做改变；
- `flatten`，将多维数组降位一维，返回拷贝，对拷贝所做的修改不会影响原始数组；
- `ravel`，与`flatten`类似，但其返回的是视图，对视图所做的修改会影响原始数组；
- `transpose`，数组转置，返回源数据的视图，对于高维数组，`transpose`需要接受由轴编号组成的元组才能进行转置，简单的转置可以用`.T`属性。
### 通用函数
通用函数（ufunc）是一种对数组中的数据执行元素级进行元素级运算的函数。

一元ufunc除了常见的`abs`（绝对值）、`sqrt`（平方根）、`square`（平方）、`exp`（指数）、`log`（对数）、`sign`（符号）、`ceil`（大于等于该值得最小整数）、`floor`（小于等于该值得最小整数）、`cos`等三角函数、`arccos`等反三角函数等，还有以下几种相对陌生的函数：
- `rint`，将各元素值四舍五入到最接近的整数，保留`dtype`；
- `modf`，将数组的小数和整数部分以两个独立数组的形式返回；
- `isnan`，返回一个布尔数组，其值为判断元素是否不是数字的结果，`NaN`即“不是一个数字”；
- `isfinite`，返回一个布尔数组，其值为判断元素是否是否是有穷的结果；
- `isinf`，返回一个布尔数组，其值为判断元素是否是否是无穷的结果；
- `logical_not`，计算各元素逻辑值的非值，相当于`-arr`。

由于Python的操作符重载功能，计算两个数组相加可以简单地写为`a+b`，而`np.add(a,b,a)`则可以用`a+=b`来表示。下面是数组的运算符和其对应的ufunc函数的一个列表。
- y = x1 + x2：add(x1, x2 [, y])
- y = x1 - x2：subtract(x1, x2 [, y])
- y = x1 * x2：multiply (x1, x2 [, y])
- y = x1 / x2：divide (x1, x2 [, y])
- y = x1 // x2：floor_divide (x1, x2 [, y]), 总是对返回值取整
- y = -x：negative(x [,y])
- y = x1**x2：power(x1, x2 [, y])
- y = x1 % x2：remainder(x1, x2 [, y]), mod(x1, x2, [, y])

其它二元ufunc还有`maximum`（最大值）、`fmax`（最大值，忽略`NaN`）、`minimum`（最大值）、`fmin`（最大值，忽略NaN）、`copysign`（符号复制）以及`logical_and`、`logical_or`、`logical_xor`等真值逻辑运算等。
### 基本数组统计方法
可以通过数组上的数学函数对整个数组或者某个轴向的数组进行统计计算。基本的数组统计方法主要有以下几种：
- `sum`，对数组中全部的或某轴向的元素求和；
- `mean`，算数平均数；
- `std、var`，标准差和方差；
- `min、max`，最大值和最小值；
- `argmin`，最大值和最小值的索引；
- `cumsum`，所有元素的累计和；
- `cumprod`，所有元素的累计积。
## Matplotlib数据可视化
数据可视化主要是借助于图形化手段，清晰有效地传达与沟通信息。在Python中，主要使用程序包matplotlib进行数据可视化。程序包matplotlib是Python最著名的数据可视化程序包，它提供了一整套和Matlab相似的命令API，十分适合交互式地进行制图。而且也可以方便地将它作为绘图控件，嵌入图形界面应用程序中。
### 基本绘图函数
程序包matplotlib的模块pyplot提供了和Matlab类似的绘图API，方便用户快速绘制2D图表。模块pyplot中常见的用来绘制图形的主要有以下几种函数：
- 函数plt.plot()：用于绘制线型图，其参数长度是可变的，参数color指定颜色，参数linestyle指定线的样式，参数marker指定标记类型，结果返回一个matplotlib.lines.Line2D对象的列表，matplotlib.lines.Line2D对象的属性可通过plot的关键字参数设置。具体参考http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.plot ；
- 函数plt.scatter()：用于绘制散点图；
- 函数plt.hist()：用于绘制直方图，参数bins指定柱状图中箱子（bin）的总数，该值默认为 10 ；
- 函数plt.show()：用于显示图像。
### 图表装饰项
对于大多数的图表装饰项，其主要实现方式主要有使用过程型的pyplot接口和面向对象的原生matplotlib接口两种，主要对应的是函数编程和对象编程两种思想。

设置图表装饰项的pyplot接口的方法主要有（以x轴为例）：
- 函数plt.title()：设置或者获取图表标题；
- 函数plt.xlim()：设置或者获取x轴范围；
- 函数plt.xlabel()：设置或者获取x轴标签；
- 函数plt.xticks(xlocations, labels)：设置或获取x轴刻度和刻度标签，其中参数xlocations指定刻度，参数labels指定标签；
- 函数plt.text(x,y,z)：将文本z绘制在图表的指定坐标(x,y)处；
- 函数plt.legend(loc)：自动创建图例，参数loc参数指定图例的位置，需要事先在添加图像时设置参数label，与其对应的实例方法是Axes.legend()；
- 函数plt.twinx(ax)：返回一个与子图对象ax的x轴一致y轴在右侧的子图对象ax2，用于绘制双轴图表，使用实例方法的形式为ax2 = ax.twinx()。

除了上面特别说明的，其它方法各自对应子图对象的的两个实例方法，以xlim为例，就是Axes.get_xlim和Axes.set_xlim。
### 创建绘图对象和子图对象
创建绘图对象和子图对象的重要函数如下：
- 函数plt.figure()：用于创建一个绘图对象，并作为当前绘图对象，通常也可以不创建绘图对象而调用plot()之类的函数直接绘图，程序库matplotlib会自动创建一个绘图对象。参数figsize可以指定绘图对象的宽度和高度，单位为英寸；参数dpi指定绘图对象的分辨率，即每英寸多少个像素，默认值为 80 。如果需要同时绘制多幅图表的话，可以是给Figure对象传递一个整数参数指定图标的序号，如果所指定序号的绘图对象已经存在的话，将不创建新的对象，而只是让它成为当前绘图对象；
- 函数plt.subplot(numRows, numCols, plotNum)：创建一个新的Figure对象，并返回一个含有已创建的subplot对象的NumPy数组，将整个绘图区域等分为numRows行、numCols列个子区域，然后按照从左到右，从上到下的顺序对每个子区域进行编号，左上的子区域的编号为1。如果numRows，numCols和plotNum的值都小于 10 ，可以把它们缩写为一个整数，例如函数 plt.subplot(321)和plt.subplot(3,2,1)是相同的；对于绘图对象有方法Axes.add_subplot()用于添加subplot对象；
- 函数plt.subplots()：创建一个包含多个子图的Figure对象，返回Figure和一个或多个ax（子图）对象，可以通过设置sharex或sharey参数指定共享x轴或y轴；
- 函数plt.axes(left, bottom, width, height)：同样用于在图表添加子图，不同之处在于子图可以设定在绘图区域的任意位置，其参数分别指定所创建的Axes对象相对于绘图对象的位置和大小，取值范围都在 0 到 1 之间。对于绘图对象有方法Axes.add_axes()用于添加subplot对象。
### 将图表保存到文件
调用函数plt.savefig()可以将当前图表保存到文件，该方法相当于Figure对象的方法savefig()。参数主要有以下几种：
- 参数fname：含有文件路径的字符串或Python的文件型对象；
- 参数dpi：图像分辨率（每英寸点数），默认为 100 ；
- 参数facecolor和edgecolor：图像的背景色，默认为"w"，即白色；
- 参数format：指定文件格式，可选"png"、"pdf"和"svg"等；
- 参数bbox_inches：指定图表需要保存的部分。